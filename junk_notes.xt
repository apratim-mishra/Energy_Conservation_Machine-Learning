
Analysis:-
----------
Find transition points for wemo (controllable switches)
Find similar devices based on transitions (over multiple days).
Switch off wemo when none of the divices are visibles.(simple rules add in client) on off day.
   Cool off period 1 hr after switching off.
For experiment Learn one day(odd days), actions even day (continous learning)
Energy usage of odd days and even days. Energy saving stats.

Questions:
 Sensors not effective when persorn is leeping
 learning errors: fixed by cooiling perions.

Tasks
--------
- run spark nightly
- Select by date
- ignore fully on elements eg., chromecast
- dump on/off data also by label
http://ip:8043/static/test.html
http://54.201.150.12:8043/static/test.html
curl "http://54.201.150.12:8043/smart_home_app/?op=hourly_data&day=2016-07-01"
curl "http://54.201.150.12:8043/smart_home_app/?op=compute_clusters&day=2016-07-01"
- DONE calculate clusters etc.,  for the given day 
- Algo
- analysis
   ~/Energy_Conservation_Machine-Learning/services$ python daily_dump.py "2016-11-28" 
   python daily_dump.py "2016-11-29"  "2016-11-30 
   2016-12-01, 2016-12-02
   2016-12-08 2016-12-09 12-10 12-7
- have invisibility also for clustering ???
- find dependency: if phone come only then laptop and wemo light ??

Good data "2016-12-28"  and "2016-12-31": teja
  2017-02-7 good
  2017-02-8 bad no transition
    2017-02-9 good
   2017-02-10 good
   2017-02-11 half 
   2017-02-12 half 
   2017-02-15 good
   2017-02-16 good
   2017-02-17 half
python /home/ubuntu/Energy_Conservation_Machine-Learning/services/daily_dump.py "2017-02-12" 1 teja > /tmp/daily.txt
cat /tmp/daily.txt | grep -v day > /tmp/daily_devices.txt
python /home/ubuntu/Energy_Conservation_Machine-Learning/services/algorithms.py /tmp/daily_devices.txt teja> /tmp/daily_devices_analysis.txt
cat /tmp/daily_devices_analysis.txt  | grep ACTION

kart: "2017-01-01" or 2017-01-03 GOOD ?  - till 2017-01-087
ubuntu@ip-172-31-41-212:~$ 
python /home/ubuntu/Energy_Conservation_Machine-Learning/services/daily_dump.py "2017-01-01" 1 kart> /tmp/daily.txt
cat /tmp/daily.txt | grep -v day > /tmp/daily_devices.txt
python /home/ubuntu/Energy_Conservation_Machine-Learning/services/algorithms.py /tmp/daily_devices.txt kart> /tmp/daily_devices_analysis.txt
cat /tmp/daily_devices_analysis.txt  | grep ACTION

ubuntu@ip-172-31-41-212:~$ SIMILARACTION 1155 CC:3D:82:52:73:08 WeMo%20Switch1
SIMILARACTION 1156 CC:3D:82:52:73:08 WeMo%20Switch1
SIMILARACTION 1157 CC:3D:82:52:73:08 WeMo%20Switch1

54.212.246.50:8043/
http://54.212.246.50:8043/static/analysis.html

- do combine to one script (easyly to run script after script)
- print analysis
    during interval wemolight1 state correlates to devices .  
   every minute 
    70 -> similar device-> wemolight1
    71  
    72
- client actions
  - if during the interval, check state of devices and turn on/off wemolight1

- 

- client enhancements
   - start wemo server autmatically
   - find list of wemos, by wemo status.
   - issue with belkin switch need to turn off using app or switch only. not the 

Analysis
----------

cd /home/ubuntu/Energy_Conservation_Machine-Learning/services

python daily_dump.py "2016-12-26"  2 | sort | grep -v all > /tmp/t.txt ; /home/ubuntu/spark-1.5.2-bin-hadoop2.6/bin/pyspark cluster-devices-daily.py /tmp/t.txt 2
python daily_dump.py "2016-12-23"  > /tmp/1223.txt ;/home/ubuntu/spark-1.5.2-bin-hadoop2.6/bin/pyspark cluster-devices-daily.py /tmp/1223.txt 5

python daily_dump.py "2016-11-30"  30 > /tmp/1130_30days.txt
/home/ubuntu/spark-1.5.2-bin-hadoop2.6/bin/pyspark cluster-devices-daily.py  --driver-memory 1g  /tmp/1130_30days.txt 5

Some devices whi are always on
   1,1,1,1,1,1
phon you see these kind of patterns:- hibernate or sleep
   tphone: ,1,1,0,0,0,0,1,1,0,1,1,1
   iphone: ,0,0,1,1,1,0
   kphone: 1,1,1,1
   aphone: 1,0,0,0,1

Laptop: on/off for a period ??
   tejmacair 10.12.2 sierra11111 000000000 (on when working and off when not working)
   sunmacair sierra 10.12.2 11111 000000000 (on when working and off when not working)
   abhlaptop sierra 10.12.1 1111 all the time
   krikmacpro  10.11 el captian  1111 all the time
      
clustering intelligently
  Invisible periods: find off periods and clustering ? how ?
  

similarity (Cosine)
  - for phone, find related devices.
  - for smart switches find the related devices. - one device or combination of devices. <---
  - for ever hour?? better hourly
  - better around transition of switches ?
  - Same device similariry every day every day ?

Decision trees
Naive bases
K means around transition data? 2 clusters
Markov Chains






1all#day:hr:min,               00:00:00,00:00:01,00:00:02,00:00:03,00:00:04,00:00:05,00:00:06,00:00:07,00:00:08,00:00:09,00:00:10,00:00:11,00:00:12,00:00:13,00:00:14,00:00:15,00:00:16,00:00:17,00:00:18,00:00:19,00:00:20,00:00:21,00:00:22,00:00:23,00:00:24,00:00:25,00:00:26,00:00:27,00:00:28,00:00:29,00:00:30,00:00:31,00:00:32,00:00:33,00:00:34,00:00:35,00:00:36,00:00:37,00:00:38,00:00:39,00:00:40,00:00:41,00:00:42,00:00:43,00:00:44,00:00:45,00:00:46,00:00:47,00:00:48,00:00:49,00:00:50,00:00:51,00:00:52,00:00:53,00:00:54,00:00:55,00:00:56,00:00:57,00:00:58,00:00:59,00:01:00,00:01:01,00:01:02,00:01:03,00:01:04,00:01:05,00:01:06,00:01:07,00:01:08,00:01:09,00:01:10,00:01:11,00:01:12,00:01:13,00:01:14,00:01:15,00:01:16,00:01:17,00:01:18,00:01:19,00:01:20,00:01:21,00:01:22,00:01:23,00:01:24,00:01:25,00:01:26,00:01:27,00:01:28,00:01:29,00:01:30,00:01:31,00:01:32,00:01:33,00:01:34,00:01:35,00:01:36,00:01:37,00:01:38,00:01:39,00:01:40,00:01:41,00:01:42,00:01:43,00:01:44,00:01:45,00:01:46,00:01:47,00:01:48,00:01:49,00:01:50,00:01:51,00:01:52,00:01:53,00:01:54,00:01:55,00:01:56,00:01:57,00:01:58,00:01:59,00:02:00,00:02:01,00:02:02,00:02:03,00:02:04,00:02:05,00:02:06,00:02:07,00:02:08,00:02:09,00:02:10,00:02:11,00:02:12,00:02:13,00:02:14,00:02:15,00:02:16,00:02:17,00:02:18,00:02:19,00:02:20,00:02:21,00:02:22,00:02:23,00:02:24,00:02:25,00:02:26,00:02:27,00:02:28,00:02:29,00:02:30,00:02:31,00:02:32,00:02:33,00:02:34,00:02:35,00:02:36,00:02:37,00:02:38,00:02:39,00:02:40,00:02:41,00:02:42,00:02:43,00:02:44,00:02:45,00:02:46,00:02:47,00:02:48,00:02:49,00:02:50,00:02:51,00:02:52,00:02:53,00:02:54,00:02:55,00:02:56,00:02:57,00:02:58,00:02:59,00:03:00,00:03:01,00:03:02,00:03:03,00:03:04,00:03:05,00:03:06,00:03:07,00:03:08,00:03:09,00:03:10,00:03:11,00:03:12,00:03:13,00:03:14,00:03:15,00:03:16,00:03:17,00:03:18,00:03:19,00:03:20,00:03:21,00:03:22,00:03:23,00:03:24,00:03:25,00:03:26,00:03:27,00:03:28,00:03:29,00:03:30,00:03:31,00:03:32,00:03:33,00:03:34,00:03:35,00:03:36,00:03:37,00:03:38,00:03:39,00:03:40,00:03:41,00:03:42,00:03:43,00:03:44,00:03:45,00:03:46,00:03:47,00:03:48,00:03:49,00:03:50,00:03:51,00:03:52,00:03:53,00:03:54,00:03:55,00:03:56,00:03:57,00:03:58,00:03:59,00:04:00,00:04:01,00:04:02,00:04:03,00:04:04,00:04:05,00:04:06,00:04:07,00:04:08,00:04:09,00:04:10,00:04:11,00:04:12,00:04:13,00:04:14,00:04:15,00:04:16,00:04:17,00:04:18,00:04:19,00:04:20,00:04:21,00:04:22,00:04:23,00:04:24,00:04:25,00:04:26,00:04:27,00:04:28,00:04:29,00:04:30,00:04:31,00:04:32,00:04:33,00:04:34,00:04:35,00:04:36,00:04:37,00:04:38,00:04:39,00:04:40,00:04:41,00:04:42,00:04:43,00:04:44,00:04:45,00:04:46,00:04:47,00:04:48,00:04:49,00:04:50,00:04:51,00:04:52,00:04:53,00:04:54,00:04:55,00:04:56,00:04:57,00:04:58,00:04:59,00:05:00,00:05:01,00:05:02,00:05:03,00:05:04,00:05:05,00:05:06,00:05:07,00:05:08,00:05:09,00:05:10,00:05:11,00:05:12,00:05:13,00:05:14,00:05:15,00:05:16,00:05:17,00:05:18,00:05:19,00:05:20,00:05:21,00:05:22,00:05:23,00:05:24,00:05:25,00:05:26,00:05:27,00:05:28,00:05:29,00:05:30,00:05:31,00:05:32,00:05:33,00:05:34,00:05:35,00:05:36,00:05:37,00:05:38,00:05:39,00:05:40,00:05:41,00:05:42,00:05:43,00:05:44,00:05:45,00:05:46,00:05:47,00:05:48,00:05:49,00:05:50,00:05:51,00:05:52,00:05:53,00:05:54,00:05:55,00:05:56,00:05:57,00:05:58,00:05:59,00:06:00,00:06:01,00:06:02,00:06:03,00:06:04,00:06:05,00:06:06,00:06:07,00:06:08,00:06:09,00:06:10,00:06:11,00:06:12,00:06:13,00:06:14,00:06:15,00:06:16,00:06:17,00:06:18,00:06:19,00:06:20,00:06:21,00:06:22,00:06:23,00:06:24,00:06:25,00:06:26,00:06:27,00:06:28,00:06:29,00:06:30,00:06:31,00:06:32,00:06:33,00:06:34,00:06:35,00:06:36,00:06:37,00:06:38,00:06:39,00:06:40,00:06:41,00:06:42,00:06:43,00:06:44,00:06:45,00:06:46,00:06:47,00:06:48,00:06:49,00:06:50,00:06:51,00:06:52,00:06:53,00:06:54,00:06:55,00:06:56,00:06:57,00:06:58,00:06:59,00:07:00,00:07:01,00:07:02,00:07:03,00:07:04,00:07:05,00:07:06,00:07:07,00:07:08,00:07:09,00:07:10,00:07:11,00:07:12,00:07:13,00:07:14,00:07:15,00:07:16,00:07:17,00:07:18,00:07:19,00:07:20,00:07:21,00:07:22,00:07:23,00:07:24,00:07:25,00:07:26,00:07:27,00:07:28,00:07:29,00:07:30,00:07:31,00:07:32,00:07:33,00:07:34,00:07:35,00:07:36,00:07:37,00:07:38,00:07:39,00:07:40,00:07:41,00:07:42,00:07:43,00:07:44,00:07:45,00:07:46,00:07:47,00:07:48,00:07:49,00:07:50,00:07:51,00:07:52,00:07:53,00:07:54,00:07:55,00:07:56,00:07:57,00:07:58,00:07:59,00:08:00,00:08:01,00:08:02,00:08:03,00:08:04,00:08:05,00:08:06,00:08:07,00:08:08,00:08:09,00:08:10,00:08:11,00:08:12,00:08:13,00:08:14,00:08:15,00:08:16,00:08:17,00:08:18,00:08:19,00:08:20,00:08:21,00:08:22,00:08:23,00:08:24,00:08:25,00:08:26,00:08:27,00:08:28,00:08:29,00:08:30,00:08:31,00:08:32,00:08:33,00:08:34,00:08:35,00:08:36,00:08:37,00:08:38,00:08:39,00:08:40,00:08:41,00:08:42,00:08:43,00:08:44,00:08:45,00:08:46,00:08:47,00:08:48,00:08:49,00:08:50,00:08:51,00:08:52,00:08:53,00:08:54,00:08:55,00:08:56,00:08:57,00:08:58,00:08:59,00:09:00,00:09:01,00:09:02,00:09:03,00:09:04,00:09:05,00:09:06,00:09:07,00:09:08,00:09:09,00:09:10,00:09:11,00:09:12,00:09:13,00:09:14,00:09:15,00:09:16,00:09:17,00:09:18,00:09:19,00:09:20,00:09:21,00:09:22,00:09:23,00:09:24,00:09:25,00:09:26,00:09:27,00:09:28,00:09:29,00:09:30,00:09:31,00:09:32,00:09:33,00:09:34,00:09:35,00:09:36,00:09:37,00:09:38,00:09:39,00:09:40,00:09:41,00:09:42,00:09:43,00:09:44,00:09:45,00:09:46,00:09:47,00:09:48,00:09:49,00:09:50,00:09:51,00:09:52,00:09:53,00:09:54,00:09:55,00:09:56,00:09:57,00:09:58,00:09:59,00:10:00,00:10:01,00:10:02,00:10:03,00:10:04,00:10:05,00:10:06,00:10:07,00:10:08,00:10:09,00:10:10,00:10:11,00:10:12,00:10:13,00:10:14,00:10:15,00:10:16,00:10:17,00:10:18,00:10:19,00:10:20,00:10:21,00:10:22,00:10:23,00:10:24,00:10:25,00:10:26,00:10:27,00:10:28,00:10:29,00:10:30,00:10:31,00:10:32,00:10:33,00:10:34,00:10:35,00:10:36,00:10:37,00:10:38,00:10:39,00:10:40,00:10:41,00:10:42,00:10:43,00:10:44,00:10:45,00:10:46,00:10:47,00:10:48,00:10:49,00:10:50,00:10:51,00:10:52,00:10:53,00:10:54,00:10:55,00:10:56,00:10:57,00:10:58,00:10:59,00:11:00,00:11:01,00:11:02,00:11:03,00:11:04,00:11:05,00:11:06,00:11:07,00:11:08,00:11:09,00:11:10,00:11:11,00:11:12,00:11:13,00:11:14,00:11:15,00:11:16,00:11:17,00:11:18,00:11:19,00:11:20,00:11:21,00:11:22,00:11:23,00:11:24,00:11:25,00:11:26,00:11:27,00:11:28,00:11:29,00:11:30,00:11:31,00:11:32,00:11:33,00:11:34,00:11:35,00:11:36,00:11:37,00:11:38,00:11:39,00:11:40,00:11:41,00:11:42,00:11:43,00:11:44,00:11:45,00:11:46,00:11:47,00:11:48,00:11:49,00:11:50,00:11:51,00:11:52,00:11:53,00:11:54,00:11:55,00:11:56,00:11:57,00:11:58,00:11:59,00:12:00,00:12:01,00:12:02,00:12:03,00:12:04,00:12:05,00:12:06,00:12:07,00:12:08,00:12:09,00:12:10,00:12:11,00:12:12,00:12:13,00:12:14,00:12:15,00:12:16,00:12:17,00:12:18,00:12:19,00:12:20,00:12:21,00:12:22,00:12:23,00:12:24,00:12:25,00:12:26,00:12:27,00:12:28,00:12:29,00:12:30,00:12:31,00:12:32,00:12:33,00:12:34,00:12:35,00:12:36,00:12:37,00:12:38,00:12:39,00:12:40,00:12:41,00:12:42,00:12:43,00:12:44,00:12:45,00:12:46,00:12:47,00:12:48,00:12:49,00:12:50,00:12:51,00:12:52,00:12:53,00:12:54,00:12:55,00:12:56,00:12:57,00:12:58,00:12:59,00:13:00,00:13:01,00:13:02,00:13:03,00:13:04,00:13:05,00:13:06,00:13:07,00:13:08,00:13:09,00:13:10,00:13:11,00:13:12,00:13:13,00:13:14,00:13:15,00:13:16,00:13:17,00:13:18,00:13:19,00:13:20,00:13:21,00:13:22,00:13:23,00:13:24,00:13:25,00:13:26,00:13:27,00:13:28,00:13:29,00:13:30,00:13:31,00:13:32,00:13:33,00:13:34,00:13:35,00:13:36,00:13:37,00:13:38,00:13:39,00:13:40,00:13:41,00:13:42,00:13:43,00:13:44,00:13:45,00:13:46,00:13:47,00:13:48,00:13:49,00:13:50,00:13:51,00:13:52,00:13:53,00:13:54,00:13:55,00:13:56,00:13:57,00:13:58,00:13:59,00:14:00,00:14:01,00:14:02,00:14:03,00:14:04,00:14:05,00:14:06,00:14:07,00:14:08,00:14:09,00:14:10,00:14:11,00:14:12,00:14:13,00:14:14,00:14:15,00:14:16,00:14:17,00:14:18,00:14:19,00:14:20,00:14:21,00:14:22,00:14:23,00:14:24,00:14:25,00:14:26,00:14:27,00:14:28,00:14:29,00:14:30,00:14:31,00:14:32,00:14:33,00:14:34,00:14:35,00:14:36,00:14:37,00:14:38,00:14:39,00:14:40,00:14:41,00:14:42,00:14:43,00:14:44,00:14:45,00:14:46,00:14:47,00:14:48,00:14:49,00:14:50,00:14:51,00:14:52,00:14:53,00:14:54,00:14:55,00:14:56,00:14:57,00:14:58,00:14:59,00:15:00,00:15:01,00:15:02,00:15:03,00:15:04,00:15:05,00:15:06,00:15:07,00:15:08,00:15:09,00:15:10,00:15:11,00:15:12,00:15:13,00:15:14,00:15:15,00:15:16,00:15:17,00:15:18,00:15:19,00:15:20,00:15:21,00:15:22,00:15:23,00:15:24,00:15:25,00:15:26,00:15:27,00:15:28,00:15:29,00:15:30,00:15:31,00:15:32,00:15:33,00:15:34,00:15:35,00:15:36,00:15:37,00:15:38,00:15:39,00:15:40,00:15:41,00:15:42,00:15:43,00:15:44,00:15:45,00:15:46,00:15:47,00:15:48,00:15:49,00:15:50,00:15:51,00:15:52,00:15:53,00:15:54,00:15:55,00:15:56,00:15:57,00:15:58,00:15:59,00:16:00,00:16:01,00:16:02,00:16:03,00:16:04,00:16:05,00:16:06,00:16:07,00:16:08,00:16:09,00:16:10,00:16:11,00:16:12,00:16:13,00:16:14,00:16:15,00:16:16,00:16:17,00:16:18,00:16:19,00:16:20,00:16:21,00:16:22,00:16:23,00:16:24,00:16:25,00:16:26,00:16:27,00:16:28,00:16:29,00:16:30,00:16:31,00:16:32,00:16:33,00:16:34,00:16:35,00:16:36,00:16:37,00:16:38,00:16:39,00:16:40,00:16:41,00:16:42,00:16:43,00:16:44,00:16:45,00:16:46,00:16:47,00:16:48,00:16:49,00:16:50,00:16:51,00:16:52,00:16:53,00:16:54,00:16:55,00:16:56,00:16:57,00:16:58,00:16:59,00:17:00,00:17:01,00:17:02,00:17:03,00:17:04,00:17:05,00:17:06,00:17:07,00:17:08,00:17:09,00:17:10,00:17:11,00:17:12,00:17:13,00:17:14,00:17:15,00:17:16,00:17:17,00:17:18,00:17:19,00:17:20,00:17:21,00:17:22,00:17:23,00:17:24,00:17:25,00:17:26,00:17:27,00:17:28,00:17:29,00:17:30,00:17:31,00:17:32,00:17:33,00:17:34,00:17:35,00:17:36,00:17:37,00:17:38,00:17:39,00:17:40,00:17:41,00:17:42,00:17:43,00:17:44,00:17:45,00:17:46,00:17:47,00:17:48,00:17:49,00:17:50,00:17:51,00:17:52,00:17:53,00:17:54,00:17:55,00:17:56,00:17:57,00:17:58,00:17:59,00:18:00,00:18:01,00:18:02,00:18:03,00:18:04,00:18:05,00:18:06,00:18:07,00:18:08,00:18:09,00:18:10,00:18:11,00:18:12,00:18:13,00:18:14,00:18:15,00:18:16,00:18:17,00:18:18,00:18:19,00:18:20,00:18:21,00:18:22,00:18:23,00:18:24,00:18:25,00:18:26,00:18:27,00:18:28,00:18:29,00:18:30,00:18:31,00:18:32,00:18:33,00:18:34,00:18:35,00:18:36,00:18:37,00:18:38,00:18:39,00:18:40,00:18:41,00:18:42,00:18:43,00:18:44,00:18:45,00:18:46,00:18:47,00:18:48,00:18:49,00:18:50,00:18:51,00:18:52,00:18:53,00:18:54,00:18:55,00:18:56,00:18:57,00:18:58,00:18:59,00:19:00,00:19:01,00:19:02,00:19:03,00:19:04,00:19:05,00:19:06,00:19:07,00:19:08,00:19:09,00:19:10,00:19:11,00:19:12,00:19:13,00:19:14,00:19:15,00:19:16,00:19:17,00:19:18,00:19:19,00:19:20,00:19:21,00:19:22,00:19:23,00:19:24,00:19:25,00:19:26,00:19:27,00:19:28,00:19:29,00:19:30,00:19:31,00:19:32,00:19:33,00:19:34,00:19:35,00:19:36,00:19:37,00:19:38,00:19:39,00:19:40,00:19:41,00:19:42,00:19:43,00:19:44,00:19:45,00:19:46,00:19:47,00:19:48,00:19:49,00:19:50,00:19:51,00:19:52,00:19:53,00:19:54,00:19:55,00:19:56,00:19:57,00:19:58,00:19:59,00:20:00,00:20:01,00:20:02,00:20:03,00:20:04,00:20:05,00:20:06,00:20:07,00:20:08,00:20:09,00:20:10,00:20:11,00:20:12,00:20:13,00:20:14,00:20:15,00:20:16,00:20:17,00:20:18,00:20:19,00:20:20,00:20:21,00:20:22,00:20:23,00:20:24,00:20:25,00:20:26,00:20:27,00:20:28,00:20:29,00:20:30,00:20:31,00:20:32,00:20:33,00:20:34,00:20:35,00:20:36,00:20:37,00:20:38,00:20:39,00:20:40,00:20:41,00:20:42,00:20:43,00:20:44,00:20:45,00:20:46,00:20:47,00:20:48,00:20:49,00:20:50,00:20:51,00:20:52,00:20:53,00:20:54,00:20:55,00:20:56,00:20:57,00:20:58,00:20:59,00:21:00,00:21:01,00:21:02,
allwemotejC0:56:27:B4:A5:79    ,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1
abhlaptop78:4F:43:54:1C:36     ,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1
tejphonenexus64:BC:0C:67:97:BC ,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       1,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       1,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,KKTejP 1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1
tejmacairB8:E8:56:43:49:08     ,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,KKmacon1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1
tejlightWeMo%20Insight         ,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       0,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       0,       0,       1,       0,       1,       1,       1,       1,       1,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       1,       1,KKli   0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,KKlion       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,KKlioff0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,       0,KKtejl 1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1,       1



-------------
http://apple.stackexchange.com/questions/253776/macbook-pro-13-with-retina-display-consumes-10-battery-overnight-with-the-lid-c
 was suffering the same issue before, my MBP 2015's battery was draining slowly but when I don't use it so frequently, this caused so much pain. This method helped me so much, now I can go out with my mac with %20 charge and make my day. There is a significant difference between MacBook Pro 2015 and the previous models of MacBook Pros. You can check these settings by this command line;

ioreg -l | grep IOPlatformFeatureDefaults
Output on your mac would be like this;

{"TCPKeepAliveDuringSleep"=Yes,"DNDWhileDisplaySleeps"=No,"TCPKeepAliveExpirationTimeout"=43200,"NotificationWake"=Yes}
To make your MBP sleep deep like the old versions you should first restart your computer into recovery mode. To do that you should restart your mac and hold CMD+R until you hear the start up sound. After that open terminal and type this;

csrutil disable

Then restart your MacBook again. Go to this destination, you can access inside kext files by right click->Show Package Contents

/System/Library/Extensions/IOPlatformPluginFamily.kext/Contents/PlugIns/X86PlatformPlugin.kext/Contents/Resources
Open Mac-E43C1C25D4880AD6.plist file by a text editor and edit these settings just like these;

<key>TCPKeepAliveDuringSleep</key>
<false/>
<key>NotificationWake</key>
<false/>
<key>DNDWhileDisplaySleeps</key>
<true/>
TCPKeepAliveDuringSleep keeps your MacBook connections open when its sleeping, so it keep Wifi connected. NotificationWake wakes your Mac randomly to check notifications especially make this one false. DNDWhileDisplaySleeps means "Do not disturb on sleep"; MacBook does get disturbed by notifications when its asleep.

My personal opinion is this process should be done by every 2015+ MacBook users. Because MacBooks are not cellphones that ring for notifications. Apple should have made a toggle button for this.

Do not forget to enable System Integrity Protection again. You should restart into recovery mode and on terminal type "csrutil enable" and restart.


https://discussions.apple.com/thread/7300625?start=30&tstart=0

$ cd /System/Library/Extensions/IOPlatformPluginFamily.kext/Contents/PlugIns/X86Plat formPlugin.kext/Contents/Resources
$ ls -la
 
To determine your board-id, enter:
 
$ ioreg -l | grep board-id
 
In my case:
Mid 2014 rMBP 15 => Mac-2BD1B31983FE1663.plist
Early 2015 rMBP 13 => Mac-E43C1C25D4880AD6.plist
 
Now let's compare the two (they are in XML format):
 
$ diff Mac-2BD1B31983FE1663.plist Mac-E43C1C25D4880AD6.plist
 
[SKIPPED]
253a250,257
>       <key>TCPKeepAliveDuringSleep</key>
>       <true/>
>       <key>TCPKeepAliveExpirationTimeout</key>
>       <integer>43200</integer>
>       <key>NotificationWake</key>
>       <true/>
>       <key>DNDWhileDisplaySleeps</key>
>       <false/>
 

El Capitan won't sleep 
activity monitor -> Energy ->  Sort on Preventing sleep
  And in activity monitor, I see that "HIDD" is "preventing sleep"
   https://www.reddit.com/r/applehelp/comments/43ks7u/macbook_wont_go_to_sleep_hidd_preventing_sleep/
   i went to printers and scanners, and control clicked on the left side of the window where devices are listed, and reset. seems to have done the trick as of right now.

bash-3.2$ bash-3.2$ bash-3.2$ bash-3.2$ pmset -g assertions
2016-12-27 08:50:53 -0800
Assertion status system-wide:
   BackgroundTask                 0
   ApplePushServiceTask           0
   UserIsActive                   1
   PreventUserIdleDisplaySleep    0
   PreventSystemSleep             0
   ExternalMedia                  0
   PreventUserIdleSystemSleep     0
   NetworkClientActive            0
Listed by owning process:
   pid 122(hidd): [0x0006253200090993] 00:13:55 UserIsActive named: "com.apple.iohideventsystem.queue.tickle"
        Timeout will fire in 111 secs Action=TimeoutActionRelease
No kernel assertions.
Idle sleep preventers: IODisplayWrangler

https://support.apple.com/kb/PH18614?viewlocale=en_US&locale=nl_NL
OS X Yosemite: Reset the printing system
  Choose Apple menu > System Preferences, then click Printers & Scanners.
  Hold down the Control key as you click in the list at the left, then choose Reset printing system from the menu that appears.
  After you reset the printing system, the list of printers in Printers & Scanners preferences is empty.
  You can re-add any printers.

OS X El Capitan: If your Mac wont go to or stay in sleep
https://support.apple.com/kb/PH21709?locale=en_US&viewlocale=en_US

mac turn off power saver: wake for network access
                          enable power nap (keeps checking even in hibernate)

1. System Preferences  Energy Saver  Battery Power :
Uncheck wake for network access

2. System Preferences  Network  Advance  TCP/IP :
Configure IPv6  Switch to Link-Local only

     syslog:
           Dec 26 00:53:58 KKOTHAPA-M-L0SW SystemUIServer[524] <Warning>: Error: [AppleBluetoothHIDDeviceGen2][_setEventService:]Couldn't copy BD_ADDR
     Dec 24 00:38:52 KKOTHAPA-M-L0SW iPassConnect-3.2[1165] <Warning>: Received iPAddressChanged Notification  Application status-> AirportNoHotspotAssociated,5

Install
---------
Ubuntu 14.04
git clone 

in home directory wget http://apache.cs.utah.edu/spark/spark-1.5.2/spark-1.5.2-bin-hadoop2.6.tgz
  cp ./conf/log4j.properties.template ./conf/log4j.properties
     In the file: change as:
     #log4j.rootCategory=INFO, console
     log4j.rootCategory=WARN, console
   cp ./conf/spark-defaults.template ./conf/spark-defaults.properties <-- this reduces memory usage of spark
      spark.driver.memory              100m  

Install Java:-
sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java8-installer
java -version
  java version "1.8.0_91"


sudo apt-get install python-setuptools
sudo easy_install pymongo
( installed pymongo-3.2.2)
sudo apt-get install python-numpy

sudo easy_install django
sudo easy_install djangorestframework

sublime:-
  Doesn't work if no no graphics
  sudo add-apt-repository -y ppa:webupd8team/sublime-text-2
  sudo apt-get install sublime-text

client:
ssh tejasvi 
 in ubuntu: sudo apt-get install nmap
           sudo python -m easy_install python-nmap

in mac: sudo easy_install python-nmap

in django settings.py
ALLOWED_HOSTS = ['PUT IP ADDRESS'] 


Wemo on client:-
        pip install ouimeaux
        sudo apt-get install python-pip
        sudo apt-get install python-dev
        sudo pip install gevent
        sudo pip install ouimeaux[server]
  to start/stop wemo power on/off
        wemo list
         Switch: WeMo Insight
        wemo status
         Switch: WeMo Insight    1
       $ wemo switch "WeMo Insight" off
       $ wemo switch "WeMo Insight" on



How to run
===================

OLD VM: bridged mode so it can see all the devices
    make sure ifconfig shows proper ip address
AWS

wemo:-
  nohup wemo server &



client:-
  for gui : site http://ip:8043/static/test.html
   change date in file: ~/Energy_Conservation_Machine-Learning/smart_home_app/views.py
        - day = "2016-07-01"

  cd ~/smart_home_app/client/

For energy:-

while [ 1 ]
do
    date
    curl http://localhost:5000/api/environment
    sleep 120
done

# client connection
sudo bash
while [ 1 ]
do
    python client_home.py
    sleep 2
done

  #python client_home.py 
   nohup python client_home.py > /dev/null 2>&1 &
   Every one minute client sends the following info to the server:-

   {"home_id": "homeid1", "device_visibility": {"192_168_1_118": {"59": "1"}, "192_168_1_1": {"59": "1"}, "192_168_1_104": {"59": "1"}}, "timestamp_hour": "2016-02-14T17:59:00"}
<Response [200]>


  (for simulation: ~/smart_home_app/client/client_simulator.py)
  
webserver:
  (with in screen)
  cd ~/Energy_Conservation_Machine-Learning
  
   python manage.py runserver 0.0.0.0:8043 >> logs.txt  
  #python manage.py runserver 0.0.0.0:8043
  #nohup python manage.py runserver 0.0.0.0:8043&
  #nohup python manage.py runserver 0.0.0.0:8043 > /dev/null 2>&1 &
  

  logs: 2016-02-07T19:00:00 weekday_hour:weekday6-19hour
<[08/Feb/2016 03:42:05] "POST /smart_home_app/ HTTP/1.1" 200 13
  2016-02-14T17:00:00 weekday_hour:weekday6-17hour
 [15/Feb/2016 01:21:54] "POST /smart_home_app/ HTTP/1.1" 200 13

  views.py appends the minute data to device_stats collection:

> db.device_stats.find().sort({"timestamp_hour":-1})
{ "_id" : ObjectId("56c1313c78dcbf2944800917"), "home_id" : "homeid1", "timestamp_hour" : "2016-02-14T18:00:00", "device_visibility" : { "192_168_1_1" : { "0" : "1", "1" : "1", "2" : "1", "3" : "1" }, "192_168_1_104" : { "0" : "1", "1" : "1", "2" : "1", "3" : "1" }, "192_168_1_147" : { "0" : "1", "1" : "1", "2" : "1", "3" : "1" }, "192_168_1_118" : { "1" : "1", "2" : "1", "3" : "1" }, "192_168_1_145" : { "1" : "1", "2" : "1", "3" : "1" } } }


mongo:-
     mongo
     > use home_automation
     switched to db home_automation
     > show collections
      device_clusters
      device_stats
     > db.device_stats.find()
     > db.device_stats.find().count()
     > db.device_stats.find().pretty()
     > db.device_clusters.find()

     display by date:-  
     db.device_stats.find({"timestamp_hour": {'$regex': '2016-12-16'}, "home_id" : "teja" }  ).sort({"timestamp_hour":-1}).toArray()

     display all rows in reverse chrological order  (and few fields only)
     > db.device_clusters.find({}, {"timestamp_hour":1, "device_clusters":1, "_id":0} ).sort({"timestamp_hour":-1}).toArray()
     
     See all Data:-
      db.device_stats.find({}  ).sort({"timestamp_hour":-1}).toArray()
Use sort my MAC:- http://192.168.1.1/DHCPTable.asp
OLD     db.device_names.insert( {"home_id" : "teja", "192_168_1_107" : "IPhone", "192_168_1_102" : "Tejasvi_Mac", "192_168_1_118" : "chromecast", "192_168_1_137": "ASUS", "192_168_1_124" : "Tejasvi-Cell", "192_168_1_1": "router" , "192_168_1_145": "?", "192_168_1_126" : "Krishna_MAC", "192_168_1_128" : "?"})
WriteResult({ "nInserted" : 1 })
Use this to remove:-
  db.device_names.find() 
  db.device_names.remove( {"_id": ObjectId("4d512b45cc9374271b02ec4f")});
  
https://macvendors.com enter three chars to find vendor.

db.device_names.deleteMany({})
Use sort my MAC:- http://192.168.1.1/DHCPTable.asp
    db.device_names.insert( {"home_id" : "teja", 

			    "192_168_1_137":"allasus",
			    "20:16:d8:15:94:66":"allasus",
			    "6C:AD:F8:2B:AA:8D":"allchromecast",
			    "C0:C1:C0:B2:BE:C4":"allrouter",
			    "C0:56:27:B4:A5:79":"allwemotej",
			    "80:56:F2:59:85:E2":"LAN_106",
			    "14:91:82:C9:61:91":"allwemosuni",

			    "64:BC:0C:67:97:BC":"tejphonenexus",
			    "B8:E8:56:43:49:08":"tejmacair",
			    "WeMo%20Insight":"tejlight",

			    "94:94:26:95:12:0B":"kriphone",
			    "AC:BC:32:B4:01:27":"krikmacpro",
			    "C8:EB:8B:96:B6:34":"kritabletidea",
                            "00:6B:9E:4A:42:83":"krivisiotv",

			    "B8:8D:12:08:6E:98":"sunmacair",
			    "00:BB:3A:11:E7:D5":"sunphone",
			    "5C:F8:A1:6D:B7:EC":"sunchromebook",
			    "WeMo%20Switch1":"sunlight",

			    "AC:37:43:53:5E:C6":"abhphone",
			    "78:4F:43:54:1C:36":"abhlaptop"
			    }
			    )


00:18:61:2F:1C:72 oom a 

to delete or remove rols
> db.device_stats.deleteMany({})
{ "acknowledged" : true, "deletedCount" : 875 }
> db.device_clusters.deleteMany({})
{ "acknowledged" : true, "deletedCount" : 168 }
> 

14:91:82:C9:61:91 - belkin
88:1F:A1:1E:E1:60 - apple
78:4F:43:54:1C:36 - apple
AC:BC:32:CF:21:3F - apple
64:BC:0C:67:97:BC - LG
B8:E8:56:43:49:08 - apple
6C:B0:CE:38:38:AE- NETGEAR
CC:3D:82:52:73:08 - Intel
60:F1:89:7D:93:C3- Murata 

***{"home_id": "kart", "device_visibility": {"14:91:82:C9:61:91": {"56": "1"}, "88:1F:A1:1E:E1:60": {"56": "1"}, "WeMo%20Switch1": {"56": "1"}, "78:4F:43:54:1C:36": {"56": "1"}, "AC:BC:32:CF:21:3F": {"56": "1"}, "64:BC:0C:67:97:BC": {"56": "1"}, "B8:E8:56:43:49:08": {"56": "1"}, "6C:B0:CE:38:38:AE": {"56": "1"}, "192_168_1_17": {"56": "1"}, "CC:3D:82:52:73:08": {"56": "1"}, "60:F1:89:7D:93:C3": {"56": "1"}}, "timestamp_hour": "2017-01-01T19:56:00"}***

learning / services:-

~/spark-1.5.2-bin-hadoop2.6/bin/pyspark --executor-memory 100M --jars /home/ubuntu/Energy_Conservation_Machine-Learning/spark-mongo-libs/mongo-hadoop-core-1.4.2.jar,/home/ubuntu/Energy_Conservation_Machine-Learning/spark-mongo-libs/mongo-java-driver-2.13.2.jar ~/Energy_Conservation_Machine-Learning/services/cluster-home-devices.py



old cd /home/bigdata/smart_home_app/services
old /home/bigdata/spark-1.5.2-bin-hadoop2.6/bin/pyspark --jars /home/bigdata/smart_home_app/spark-mongo-libs/mongo-hadoop-core-1.4.2.jar,/home/bigdata/smart_home_app/spark-mongo-libs/mongo-java-driver-2.13.2.jar cluster-home-devices.py

  Sample: 
     weekday0-0hour optimal_clusters:4 optimal_cost:0.0
      ..
      weekday3-16hour optimal_clusters:6 optimal_cost:0.0
      ..
      weekday6-23hour optimal_clusters:6 optimal_cost:0.0

 takes device_stats and applies map-reduce and inserts in device_clusters. Also applies Kmeans to derive cluster numbering. "device_clusters" : { "192_168_1_118" : 0, "192_168_1_1" : 6, "192_168_1_104" : 6, "192_168_1_147" : 6, "192_168_1_145" : 0 }


  > db.device_clusters.find().sort({"timestamp_hour":-1})
{ "_id" : { "timeSecond" : 1455501628, "timestamp" : 1455501628, "__class__" : "org.bson.types.ObjectId", "machine" : 2027732777, "time" : NumberLong("1455501628000"), "date" : ISODate("2016-02-14T18:00:28Z"), "new" : false, "inc" : 1149241623 }, "device_visibility_by_minute" : { "192_168_1_118" : [ 0, "1", "1", "1", "1", "1", "1", "1", 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ], "192_168_1_1" : [ "1", "1", "1", "1", "1", "1", "1", "1", 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ], "192_168_1_104" : [ "1", "1", "1", "1", "1", "1", "1", "1", 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ], "192_168_1_147" : [ "1", "1", "1", "1", "1", "1", "1", "1", 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ], "192_168_1_145" : [ 0, "1", "1", "1", "1", "1", "1", "1", 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ] }, "home_id" : "homeid1", "device_clusters" : { "192_168_1_118" : 0, "192_168_1_1" : 6, "192_168_1_104" : 6, "192_168_1_147" : 6, "192_168_1_145" : 0 }, "device_visibility" : { "192_168_1_118" : { "1" : "1", "3" : "1", "2" : "1", "5" : "1", "4" : "1", "7" : "1", "6" : "1" }, "192_168_1_1" : { "1" : "1", "0" : "1", "3" : "1", "2" : "1", "5" : "1", "4" : "1", "7" : "1", "6" : "1" }, "192_168_1_104" : { "1" : "1", "0" : "1", "3" : "1", "2" : "1", "5" : "1", "4" : "1", "7" : "1", "6" : "1" }, "192_168_1_147" : { "1" : "1", "0" : "1", "3" : "1", "2" : "1", "5" : "1", "4" : "1", "7" : "1", "6" : "1" }, "192_168_1_145" : { "1" : "1", "3" : "1", "2" : "1", "5" : "1", "4" : "1", "7" : "1", "6" : "1" } }, "weekday_hour" : "weekday6-18hour", "timestamp_hour" : "2016-02-14T18:00:00" }

runtime:-
  the web request will send switch off message as part of json:-
  ~/smart_home_app/smart_home_app/views.py
  logic: 
      we get input data (device_visibility).
      check device_clusters collections for the corresponding weekday_hour.
      for each device data in the input data, for each minute
       

password
===========
sudo password: 1234567890

Install
===============
sudo apt-get autoremove python
sudo apt-get remove  python-django

sudo apt-get install python-pip
##sudo apt-get install  python-django
sudo pip install --upgrade Django==1.8.3 
#sudo pip install Django==1.8.3 # https://www.djangoproject.com/download/

#sudo apt-get install -y mongodb
#sudo pip install -U mongo

sudo pip install djangorestframework
sudo apt-get install build-essential python-dev

#pip  install pymongo

cd;/usr/local/bin/django-admin  startproject restaurantapp

GOOD follow: http://johnnyprogrammer.blogspot.in/2013/08/creating-rest-service-with-django-and.html
~/restaurantapp/restaurantapp/settings.py




Run the webserver
cd ~/restaurantapp/
python manage.py runserver 0.0.0.0:8000

http://52.10.60.239:8000/restaurants/ <-- carefull public ip changes.

post form url encoded:
bash-3.2$ curl "http://52.10.60.239:8000/restaurants/?" -d "id=id1&name=name1&address=address1"
{"ok":"true"}

curl http://52.24.173.123:8000/restaurants/
curl http://52.24.173.123:8000/restaurants/
[{"id":"55c6a476b77cb30b27f76679","name":"name1","address":"address1"},{"id":"55c6be15b77cb30c231648e8","name":"name2","address":"address2"},{"id":"55c6be2bb77cb30c231648e9","name":"name3","address":"address3"}]ubuntu@ip-172-31-33-227:~/restaurantapp$ 

mongo
------
install https://www.digitalocean.com/community/tutorials/how-to-install-mongodb-on-ubuntu-14-04

ubuntu@ip-172-31-33-227:~$ mongo
MongoDB shell version: 2.4.9
connecting to: test


>  show dbs
local        0.078GB
restaurants  0.203GB
> 


> use home_automation
switched to db home_automation

> show collections
device_stats
system.indexes
> 

> db.device_stats.insert (  {home_id : "home1id",
		       	  timestamp_hour: ISODate("2015-10-10T23:00:00.000Z"),
			  device_visibility: {
			    d1: {0:1, 1:1},
			    d2: {0:1, 1:0},
			    d3: {0:0, 1:1},
			  }
		       	   }  
		)

... ... ... ... ... ... ... ... WriteResult({ "nInserted" : 1 })
> > 

>  db.device_stats.find()
{ "_id" : ObjectId("55e21e7f7eee7eecb40245cf"), "home_id" : "home1id", "timestamp_hour" : ISODate("2015-10-10T23:00:00Z"), "device_visibility" : { "d1" : { "0" : 1, "1" : 1 }, "d2" : { "0" : 1, "1" : 0 }, "d3" : { "0" : 0, "1" : 1 } } }
> 


>  db.device_stats.find().pretty()
{
	"_id" : ObjectId("55e21e7f7eee7eecb40245cf"),
	"home_id" : "home1id",
	"timestamp_hour" : ISODate("2015-10-10T23:00:00Z"),
	"device_visibility" : {
		"d1" : {
			"0" : 1,
			"1" : 1
		},
		"d2" : {
			"0" : 1,
			"1" : 0
		},
		"d3" : {
			"0" : 0,
			"1" : 1
		}
	}
}

> db.device_stats.update ( {"home_id": "test", "timestamp_hour": "weekday6-16hour"}, {"$set": {'device_visibility.192_168_1_1.58': '1', 'device_visibility.192_168_1_124.58': '1', 'device_visibility.192_168_1_118.58': '1', 'device_visibility.192_168_1_102.58': '1'}}, {upsert:true})
WriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })
db.device_stats.update ( {"home_id": "test", "timestamp_hour": "weekday6-16hour"}, {"$set": {'device_visibility.192_168_1_1.58': '1'}}, {upsert:true})


WriteResult({
	"nMatched" : 0,
	"nUpserted" : 1,
	"nModified" : 0,
	"_id" : ObjectId("575dfb77bb2201f88c3fdbcc")
})
>  db.device_stats.update (
    {"home_id" : "home1id",
    "timestamp_hour" : ISODate("2015-10-10T23:00:00Z"),
    },
    {$set: {"device_visibility.d1.2":1} }
   )
... ... ... ... ... WriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 1 })
>  


>  db.device_stats.update (
    {"home_id" : "home1id",
    "timestamp_hour" : ISODate("2015-10-10T23:00:00Z"),
    },
    {$set: {"device_visibility.d1.2":1, "device_visibility.d2.2":0, "device_visibility.d3.2":1, "device_visibility.d4.2":0} } )
... ... ... ... WriteResult({ "nMatched" : 1, "nUpserted" : 0, "nModified" : 0 })


Insert or Update : use upsert flag in update:
db.device_stats.update (  
   {"home_id" : "home1id",
     "timestamp_hour" : ISODate("2015-10-10T20:00:00Z"),
    },
    {$set: {"device_visibility.d6.2":1, "device_visibility.d7.2":0, "device_visibility.d.2":1, "device_visibility.d4.2":0} },
     {upsert:true }
 )


> use restaurants
switched to db restaurants

> db.restaurants.findOne()
{
	"_id" : ObjectId("55c6a476b77cb30b27f76679"),
	"name" : "name1",
	"address" : "address1"
}
>  

db.restaurants.find()
{ "_id" : ObjectId("55c6a476b77cb30b27f76679"), "name" : "name1", "address" : "address1" }
{ "_id" : ObjectId("55c6be15b77cb30c231648e8"), "name" : "name2", "address" : "address2" }
{ "_id" : ObjectId("55c6be2bb77cb30c231648e9"), "name" : "name3", "address" : "address3" }
> 


> db.restaurants.count()
3


/etc/mongodb.conf change to reduce disk usage
# Enable journaling, http://www.mongodb.org/display/DOCS/Journaling
##journal=true
journal=false

How to start/stop

sudo nohup /usr/bin/mongod --config /etc/mongod.conf   &
sudo /usr/bin/mongod --config /etc/mongod.conf   --shutdown

OLD 
#sudo service mongod start
sudo nohup /usr/bin/mongod --config /etc/mongodb.conf&

how to stop mongodb:-

ubuntu@ip-172-31-33-227:~$ ps -aef | grep mongo
mongodb    832     1  0 01:07 ?        00:00:12 /usr/bin/mongod --config /etc/mongodb.conf

http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/


sudo  /etc/init.d/mongodb  stop  (did not work)

conf file: /etc/mongodb.conf

log: /var/log/mongodb/mongodb.log


spark
------

#wget http://mirror.reverse.net/pub/apache/spark/spark-1.4.1/spark-1.4.1.tgz 
#tar zxf spark-1.4.1.tgz 

# prebuilt binary
wget http://www.motorlogy.com/apache/spark/spark-1.4.1/spark-1.4.1-bin-hadoop2.6.tgz 
http://www.motorlogy.com/apache/spark/spark-1.4.1/spark-1.4.1-bin-hadoop2.6.tgz 
tar zxf  spark-1.4.1-bin-hadoop2.6.tgz




sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java8-installer

install NumPy
--------------
used in spark kmeans example
sudo apt-get install python-numpy python-scipy python-matplotlib ipython ipython-notebook python-pandas python-sympy python-nose
sudo apt-get install python-sklearn

spark kmeans example
----------------------

ref: http://spark.apache.org/docs/latest/
http://spark.apache.org/docs/latest/mllib-clustering.html


http://stackoverflow.com/questions/30972057/is-the-streaming-k-means-clustering-predefined-in-mllib-library-of-spark-supervi
K-means (streaming or regular) is a clustering algorithm. Clustering algorithms are by definition unsupervised. That is, you don't know the natural groupings (labels) of your data and you want to automatically group similar entities together.

The term "train" here refers to "learning" the clusters (centroids).

The term "predict" refers to predicting which cluster a new point belongs to.


kmeans normal:-
cd /usr/local/spark-1.4.1-bin-hadoop2.6
ubuntu@ip-172-31-33-227:~/spark-1.4.1-bin-hadoop2.6$ ./bin/spark-submit examples/src/main/python/mllib/kmeans.py ./data/mllib/kmeans_data.txt 3


Kmeans streaming 
http://spark.apache.org/docs/latest/mllib-clustering.html#streaming-k-means
~/spark-1.4.1-bin-hadoop2.6/examples/src/main/scala/org/apache/spark/examples/mllib/StreamingKMeansExample.scala

ubuntu@ip-172-31-33-227:~/spark-1.4.1-bin-hadoop2.6$ ./bin/run-example mllib.StreamingKMeansExample
Usage: StreamingKMeansExample <trainingDir> <testDir> <batchDuration> <numClusters> <numDimensions>

spark kafka 
--------------

https://databricks.com/blog/2015/07/30/diving-into-spark-streamings-execution-model.html

// Learn model offline
val model = KMeans.train(dataset, ...)

// Apply model online on stream
val kafkaStream = KafkaUtils.createDStream(...)
kafkaStream.map { event => model.predict(featurize(event)) }


spark controllering output  log info
-----------------------------------

ubuntu@ip-172-31-33-227:~/spark-1.4.1-bin-hadoop2.6$ cp ./conf/log4j.properties.template ./conf/log4j.properties

In the file: change as:

#log4j.rootCategory=INFO, console
log4j.rootCategory=WARN, console


spark 1.5.0 preview
---------------------

http://people.apache.org/~pwendell/spark-releases/spark-1.5.0-preview-20150812-docs/

Streaming: http://people.apache.org/~pwendell/spark-releases/spark-1.5.0-preview-20150812-docs/api/python/pyspark.mllib.html#module-pyspark.mllib.clustering
  pyspark.mllib.clustering.StreamingKMeans(k=2, decayFactor=1.0, timeUnit='batches')

Spark mongoDB (complicated did not try) see below:  spark hadoop connector
---------------------------------------------

Download jar file here:-
See http://spark-packages.org/package/Stratio/spark-mongodb

cd /home/bigdata/smart_home_app/mongo-hadoop-jars
wget http://repo1.maven.org/maven2/com/stratio/datasource/spark-mongodb_2.10/0.10.1/spark-mongodb_2.10-0.10.1.jar



See https://github.com/mongodb/mongo-hadoop/tree/master/spark/src/main/python

git clone https://github.com/mongodb/mongo-hadoop.git

 Go to the pymongo-spark directory of the project and install:

    cd /home/bigdata/smart_home_app/mongo-hadoop/spark/src/main/python
    python setup.py install

~/Downloads/spark-1.5.2-bin-hadoop2.6/bin/pyspark --jars /home/bigdata/smart_home_app/mongo-hadoop-jars/spark-mongodb_2.10-0.10.1.jar

>>> import pymongo_spark
>>> pymongo_spark.activate()
>>> mongo_rdd = sc.mongoRDD('mongodb://127.0.0.1:27017/home_automation.device_stats')
Traceback (most recent call last):

You'll also need to put mongo-hadoop-spark.jar (see above for instructions on how to obtain this) somewhere on Spark's CLASSPATH prior to using this package.

Usage

pymongo-spark works by monkey-patching PySpark's RDD and SparkContext classes. All you need to do is call the activate() function in pymongo-spark:

import pymongo_spark
pymongo_spark.activate()

# You are now ready to use BSON and MongoDB with PySpark.

Make sure to set the appropriate options to put mongo-hadoop-spark.jar on Spark's CLASSPATH. For example:

bin/pyspark --jars mongo-hadoop-spark.jar \
            --driver-class-path mongo-hadoop-spark.jar

You might also need to add pymongo-spark and/or PyMongo to Spark's PYTHONPATH explicitly:

bin/pyspark --py-files /path/to/pymongo_spark.py,/path/to/pymongo.egg

Examples
Read from MongoDB

>>> mongo_rdd = sc.mongoRDD('mongodb://localhost:27017/db.collection')
>>> print(mongo_rdd.first())
{u'_id': ObjectId('55cd069c6e32abacca39da2b'),
 u'hello': u'from MongoDB!'}

Write to MongoDB

>>> some_rdd.saveToMongoDB('mongodb://localhost:27017/db.output_collection')

Reading from a BSON File

>>> file_path = 'my_bson_files/dump.bson'
>>> rdd = sc.BSONFileRDD(file_path)
>>> rdd.first()
{u'_id': ObjectId('55cd071e6e32abacca39da2c'),
 u'hello': u'from BSON!'}

Write to a BSON File

>>> some_rdd.saveToBSON('my_bson_files/output')



spark hadoop connector
------------------------

see
  https://github.com/mongodb/mongo-hadoop/wiki/Spark-Usage
  https://github.com/mongodb/mongo-hadoop/wiki/Spark-Usage

Obtain the MongoDB Hadoop Connector. You can either build it or download the jars. The releases page also includes instructions for use with Maven and Gradle. For Spark, all you need is the "core" jar.

see https://databricks.com/blog/2015/03/20/using-mongodb-with-spark.html


wget https://github.com/mongodb/mongo-hadoop/releases/download/r1.4.0/mongo-hadoop-core-1.4.0.jar
from http://mongodb.github.io/mongo-java-driver/ download mongo java driver corresponding to the mongodb version:
  wget https://oss.sonatype.org/content/repositories/releases/org/mongodb/mongo-java-driver/2.13.2/mongo-java-driver-2.13.2.jar
  #wget https://oss.sonatype.org/content/repositories/releases/org/mongodb/mongodb-driver/3.0.3/mongodb-driver-3.0.3.jar


~/spark-1.4.1-bin-hadoop2.6/bin/pyspark

Start spark w/ the connector as follows:-

~/spark-1.4.1-bin-hadoop2.6/bin/pyspark --jars mongo-hadoop-core-1.4.0.jar,mongo-java-driver-2.13.2.jar


rdd =  sc.newAPIHadoopRDD(inputFormatClass='com.mongodb.hadoop.MongoInputFormat', keyClass='org.apache.hadoop.io.Text', valueClass='org.apache.hadoop.io.MapWritable', conf={'mongo.input.uri': 'mongodb://127.0.0.1:27017/db.restaurants'})

py4j.protocol.Py4JJavaError: An error occurred while calling z:org.apache.spark.api.python.PythonRDD.newAPIHadoopRDD.
: java.lang.RuntimeException: Unable to calculate input splits from collection stats: Database [db] not found.


WORKS:


bigdata@cosmos:~/smart_home_app/spark-mongo-libs$ /usr/local/spark-1.4.1-bin-hadoop2.6/bin/pyspark --jars mongo-hadoop-core-1.4.0.jar,mongo-java-driver-2.13.2.jar

>>> rdd = sc.newAPIHadoopRDD(inputFormatClass='com.mongodb.hadoop.MongoInputFormat', keyClass='org.apache.hadoop.io.Text', valueClass='org.apache.hadoop.io.MapWritable',        conf={'mongo.input.uri': 'mongodb://127.0.0.1:27017/home_automation.device_stats', 'mongo.input.split.create_input_splits':'false'})
>>> rdd.collect()
[({u'timeSecond': 1442716814, u'times
..
>>> rdd.count()
1359

>>> def myfunc(s):
...       s[1]['timestamp_hour'] = '2011-10-10T23:00:00.000Z'
...       print(s)
... 
>>> rdd.map(myfunc).collect()
({u'timeSecond': 1442716814, 
>>> def myfunc(s):
...       s[1]['timestamp_hour'] = '2011-10-10T23:00:00.000Z'
...       return s
... 
>>> rdd.map(myfunc).take(1)
[({u'timeSecond': 1442716814, u'timestamp': 1442716814, u'__class__': u'org.bson.types.ObjectId', u'machine': -1977956904, u'time': 1442716814000, u'date': datetime.datetime(2015, 9, 19, 19, 40, 14), u'new': False, u'inc': -1241015526}, {u'



In code

/usr/local/spark-1.4.1-bin-hadoop2.6/bin/pyspark --jars /home/bigdata/smart_home_app/spark-mongo-libs/mongo-hadoop-core-1.4.0.jar,/home/bigdata/smart_home_app/spark-mongo-libs/mongo-java-driver-2.13.2.jar cluster-home-devices.py

or to work in pycharm.

add this in /usr/local/spark-1.4.1-bin-hadoop2.6/conf/spark-defaults.conf

spark.driver.extraClassPath /home/bigdata/smart_home_app/spark-mongo-libs/mongo-hadoop-core-1.4.0.jar:/home/bigdata/smart_home_app/spark-mongo-libs/mongo-java-driver-2.13.2.jar

and in code add this:-

# need for pycharm
def configure_spark(spark_home=None, pyspark_python=None):
    spark_home = spark_home or "/path/to/default/spark/home"
    os.environ['SPARK_HOME'] = spark_home

    # Add the PySpark directories to the Python path:
    sys.path.insert(1, os.path.join(spark_home, 'python'))
    sys.path.insert(1, os.path.join(spark_home, 'python', 'pyspark'))
    sys.path.insert(1, os.path.join(spark_home, 'python', 'build'))

    # If PySpark isn't specified, use currently running Python binary:
    pyspark_python = pyspark_python or sys.executable
    os.environ['PYSPARK_PYTHON'] = pyspark_python


# import numpy as np
configure_spark('/usr/local/spark-1.4.1-bin-hadoop2.6')
from pyspark import SparkContext, SparkConf
from pyspark.mllib.clustering import KMeans




OLD:
rdd = sc.newAPIHadoopRDD(inputFormatClass='com.mongodb.hadoop.MongoInputFormat', keyClass='org.apache.hadoop.io.Text', valueClass='org.apache.hadoop.io.MapWritable',        conf={'mongo.input.uri': 'mongodb://127.0.0.1:27017/restaurants.restaurants', 'mongo.input.split.create_input_splits':'false'})

>>> rdd.collect()

[({u'timeSecond': 1439081590, u'timestamp': 1439081590, u'__class__': u'org.bson.types.ObjectId', u'machine': -1216564469, u'time': 1439081590000, u'date': datetime.datetime(2015, 8, 9, 0, 53, 10), u'new': False, u'inc': 670525049}, {u'_id': {u'timeSecond': 1439081590, u'timestamp': 1439081590, u'__class__': u'org.bson.types.ObjectId', u'machine': -1216564469, u'time': 1439081590000, u'date': datetime.datetime(2015, 8, 9, 0, 53, 10), u'new': False, u'inc': 670525049}, u'name': u'name1', u'address': u'address1'}), ({u'timeSecond': 1439088149, u'timestamp': 1439088149, u'__class__': u'org.bson.types.ObjectId', u'machine': -1216564468, u'time': 1439088149000, u'date': datetime.datetime(2015, 8, 9, 2, 42, 29), u'new': False, u'inc': 588663016}, {u'_id': {u'timeSecond': 1439088149, u'timestamp': 1439088149, u'__class__': u'org.bson.types.ObjectId', u'machine': -1216564468, u'time': 1439088149000, u'date': datetime.datetime(2015, 8, 9, 2, 42, 29), u'new': False, u'inc': 588663016}, u'name': u'name2', u'address': u'address2'}), ({u'timeSecond': 1439088171, u'timestamp': 1439088171, u'__class__': u'org.bson.types.ObjectId', u'machine': -1216564468, u'time': 1439088171000, u'date': datetime.datetime(2015, 8, 9, 2, 42, 51), u'new': False, u'inc': 588663017}, {u'_id': {u'timeSecond': 1439088171, u'timestamp': 1439088171, u'__class__': u'org.bson.types.ObjectId', u'machine': -1216564468, u'time': 1439088171000, u'date': datetime.datetime(2015, 8, 9, 2, 42, 51), u'new': False, u'inc': 588663017}, u'name': u'name3', u'address': u'address3'})]
>>> 



pymongo
========

Good http://altons.github.io/python/2013/01/21/gentle-introduction-to-mongodb-using-pymongo/ 
http://api.mongodb.org/python/current/tutorial.html


django-rest 
==========

GOOD follow: http://johnnyprogrammer.blogspot.in/2013/08/creating-rest-service-with-django-and.html
See http://www.django-rest-framework.org/tutorial/1-serialization/ click Tutorial menu and see other tutorial
or http://cisco.safaribooksonline.com/book/web-development/django/9781491946275/4dot-building-a-rest-api/_django_and_rest_html
or http://cisco.safaribooksonline.com/book/web-development/django/9781785281167/7dot-share-and-share-alike/ch07s02_html 

cd;
/usr/local/bin/django-admin startproject smart_home_app
cd smart_home_app;mkdir services # in services add the files needed.

cd smart_home_app

see python manage.py --help 
see python manage.py startapp --help 

cd smart_home_app


Add files and change urls.py

~/smart_home_app$ python manage.py runserver 0.0.0.0:8000

test:
~/smart_home_app/test$ curl -X POST -d @device_stats_post.json "http://localhost:8000/smart_home_app/?"

~/smart_home_app/test$ cat device_stats_post.json
{"home_id" : "home1id",
 "timestamp_hour": "2015-10-10T23:00:00.000Z",
 "device_visibility": {
     "d1": {"0":1, "1":1},
     "d2": {"0":1, "1":0},
     "d3": {"0":0, "1":1}
 }
}


~/smart_home_app/test$ curl -X POST -d @device_stats_post.json "http://localhost:8000/smart_home_app/?"

~/smart_home_app/test$ cat device_stats_post.json
{"home_id" : "home1id",
 "timestamp_hour": "2015-10-10T23:00:00.000Z",
 "device_visibility": {
     "d1": {"0":1, "1":1},
     "d2": {"0":1, "1":0},
     "d3": {"0":0, "1":1}
 }
}

* kafka
==========


http://kafka.apache.org/documentation.html#quickstart

find scala version
~/spark-1.4.1-bin-hadoop2.6/bin$ ./spark-shell 
...
Using Scala version 2.10.4 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_51)
...


Download corresponding to scala version here:
  http://kafka.apache.org/downloads.html
  cd ;wget http://apache.arvixe.com//kafka/0.8.2.1/kafka_2.10-0.8.2.1.tgz 
  tar zxf kafka_2.10-0.8.2.1.tgz 
  Start the zoo keeper server:
    cd /home/ubuntu/kafka_2.10-0.8.2.1
    bin/zookeeper-server-start.sh config/zookeeper.properties

  Now start the Kafka server:
   cd /home/ubuntu/kafka_2.10-0.8.2.1
   bin/kafka-server-start.sh config/server.properties
   in ~/kafka_2.10-0.8.2.1/bin/kafka-server-start.sh reduce memory usage:
    if [ "x$KAFKA_HEAP_OPTS" = "x" ]; then
     #    export KAFKA_HEAP_OPTS="-Xmx1G -Xms1G"
          export KAFKA_HEAP_OPTS="-Xmx200M -Xms100M"
    fi

  Create a topic: Let's create a topic named "test" with a single partition and only one replica:
   cd /home/ubuntu/kafka_2.10-0.8.2.1
   bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test
   Created topic "test".
   We can now see that topic if we run the list topic command:
  > bin/kafka-topics.sh --list --zookeeper localhost:2181
   test

  Step 4: Send some messages

   Kafka comes with a command line client that will take input from a file or from standard input and send it out as messages to the Kafka cluster. By default each line will be sent as a separate message.
Run the producer and then type a few messages into the console to send to the server.

> bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test 
This is a message
This is another message
Step 5: Start a consumer

Kafka also has a command line consumer that will dump out messages to standard output.
> bin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic test --from-beginning
This is a message
This is another message
If you have each of the above commands running in a different terminal then you should now be able to type messages into the producer terminal and see them appear in the consumer terminal.

All of the command line tools have additional options; running the command with no arguments will display usage information documenting them in more detail.

  

  
running spark streaming  
==========================

nc -lk 9999

# !!!running python examples have problem.!!! does not work
./bin/spark-submit  examples/src/main/python/streaming/network_wordcount.py localhost 9999

# scala streaming example works.
bin/run-example org.apache.spark.examples.streaming.NetworkWordCount localhost 9999
code: ~/spark-1.4.1-bin-hadoop2.6/examples/src/main/scala/org/apache/spark/examples/streaming/NetworkWordCount.scala

running spark streaming example on kafka
======================================


http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22org.apache.spark%22%20AND%20v%3A%221.4.1%22

search string as we are using spark 1.4.1
g:"org.apache.spark" AND v:"1.4.1"


org.apache.spark     spark-streaming-kafka-assembly_2.10	1.4.1	08-Jul-2015	pom  jar  sources.jar  test-sources.jar  tests.jar  

wget -O spark-streaming-kafka-assembly_2.10-1.4.1.jar http://search.maven.org/remotecontent?filepath=org/apache/spark/spark-streaming-kafka-assembly_2.10/1.4.1/spark-streaming-kafka-assembly_2.10-1.4.1.jar 


Start zookeeper and kafka.

# PYTHON Example does not work
cd ~/spark-1.4.1-bin-hadoop2.6/
./bin/spark-submit --jars /home/ubuntu/kafka_2.10-0.8.2.1/spark-streaming-kafka-assembly_2.10-1.4.1.jar  examples/src/main/python/streaming/kafka_wordcount.py localhost:2181 test 


# scala works
cd /home/ubuntu/spark-1.4.1-bin-hadoop2.6
bin/run-example org.apache.spark.examples.streaming.KafkaWordCount localhost:2181 group test 1

send messages:
cd ~/kafka_2.10-0.8.2.1
ubuntu@ip-172-31-33-227:~/kafka_2.10-0.8.2.1$ bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test 
[2015-09-06 02:32:10,601] WARN Property topic is not valid (kafka.utils.VerifiableProperties)
gg  gggg
hgfhffhfghg
hello world

kafka python integration
=======================

#wget https://github.com/Parsely/pykafka/archive/master.zip

#sudo pip install pykafka
#sudo pip install --upgrade pykafka

#package name is pykafka
#  ubuntu@ip-172-31-33-227:~$ ls -lt  /usr/local/lib/python2.7/dist-packages/pykafka/client*
#  -rw-r--r-- 1 root staff 3866 Sep  6 23:35 /usr/local/lib/python2.7/dist-packages/pykafka/client.pyc
#  -rw-r--r-- 1 root staff 3506 Sep  6 23:35 /usr/local/lib/python2.7/dist-packages/pykafka/client.py

docs: http://kafka-python.readthedocs.org/en/latest/install.html
sudo pip install kafka-python

example: https://github.com/mumrah/kafka-python/blob/master/example.py
wget https://raw.githubusercontent.com/mumrah/kafka-python/master/example.py

    cd kafka_2.10-0.8.2.1
   bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic my-topic

  cd
  python example.py
  # above sends and receives messages to my-topic





eclipse
=============
cd eclipse
./eclipse


emacs
============
start GUI version as keys work well ( not export DISPLAY=)

pycharm
==========
just run: charm

also run configuration select only python2.7



cluster kmeans
===============

/home/bigdata/smart_home_app/services
bigdata@cosmos:~/smart_home_app/services$ /usr/local/spark-1.4.1-bin-hadoop2.6/bin/spark-submit  cluster-devices.py home1-data.txt 


import pdb; pdb.set_trace()



rpdb
===========
VERY GOOD
   see https://pypi.python.org/pypi/rpdb/
   for client debug:

    in code add:
     import rpdb; rpdb.set_trace()
    good break point /opt/stack/python-gbpclient/gbpclient/v2_0/client.py::retry_request
     cd /home/openstack
     mkdir rpdb
     cd rpdb
     wget https://pypi.python.org/packages/source/r/rpdb/rpdb-0.1.5.tar.gz
     tar zxf rpdb-0.1.5.tar.gz
     cd ..
     export PYTHONPATH=~/Energy_Conservation_Machine-Learning//rpdb/rpdb-0.1.5/
     tox -e venv -- python  -m testtools.run

     #if you do below one, it will break for a short time only
     #tox -e pep8,py27
   
   pdb is running on 127.0.0.1:4444
  
   emacs M-x pdb
   nc 127.0.0.1 4444



how it works
==============


(Pdb) print rdd1.take(1)
[{u'home_id': u'homeid1', u'device_visibility': {u'9': {u'11': u'1', u'10': u'1', u'13': u'1', u'12': u'1'}, u'4': {u'11': u'1', u'10': u'1', u'13': u'1', u'12': u'1'}}, u'_id': {u'timeSecond': 1451177295, u'timestamp': 1451177295, u'__class__': u'org.bson.types.ObjectId', u'machine': 2027732777, u'time': 1451177295000, u'date': datetime.datetime(2015, 12, 26, 16, 48, 15), u'new': False, u'inc': 1149240855}, u'timestamp_hour': u'2015-12-26T09:13:00'}]
(Pdb) print rdd2.take(1)
[{u'home_id': u'homeid1', u'device_visibility': {u'9': {u'11': u'1', u'10': u'1', u'13': u'1', u'12': u'1'}, u'4': {u'11': u'1', u'10': u'1', u'13': u'1', u'12': u'1'}}, u'_id': {u'timeSecond': 1451177295, u'timestamp': 1451177295, u'__class__': u'org.bson.types.ObjectId', u'machine': 2027732777, u'time': 1451177295000, u'date': datetime.datetime(2015, 12, 26, 16, 48, 15), u'new': False, u'inc': 1149240855}, u'timestamp_hour': 'weekday5-9hour'}]
(Pdb) print rdd3.take(1)
[{u'home_id': u'homeid1', u'device_visibility': {u'9': {u'11': u'1', u'10': u'1', u'13': u'1', u'12': u'1'}, u'4': {u'11': u'1', u'10': u'1', u'13': u'1', u'12': u'1'}}, u'_id': {u'timeSecond': 1451177295, u'timestamp': 1451177295, u'__class__': u'org.bson.types.ObjectId', u'machine': 2027732777, u'time': 1451177295000, u'date': datetime.datetime(2015, 12, 26, 16, 48, 15), u'new': False, u'inc': 1149240855}, u'timestamp_hour': 'weekday5-9hour', 'device_visibility_by_minute': {u'9': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, u'1', u'1', u'1', u'1', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], u'4': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, u'1', u'1', u'1', u'1', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}}]
(Pdb) p rdd3.map(lambda s: s['device_visibility_by_minute']).take(1)
[{u'9': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, u'1', u'1', u'1', u'1', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], u'4': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, u'1', u'1', u'1', u'1', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}]
(Pdb) dir( rdd3.map(lambda s: s['device_visibility_by_minute']))
['__add__', '__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__getnewargs__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_bypass_serializer', '_can_spill', '_computeFractionForSampleSize', '_defaultReducePartitions', '_id', '_is_pipelinable', '_jrdd', '_jrdd_deserializer', '_jrdd_val', '_memory_limit', '_pickled', '_prev_jrdd', '_prev_jrdd_deserializer', '_reserialize', '_to_java_object_rdd', 'aggregate', 'aggregateByKey', 'cache', 'cartesian', 'checkpoint', 'coalesce', 'cogroup', 'collect', 'collectAsMap', 'combineByKey', 'context', 'count', 'countApprox', 'countApproxDistinct', 'countByKey', 'countByValue', 'ctx', 'distinct', 'filter', 'first', 'flatMap', 'flatMapValues', 'fold', 'foldByKey', 'foreach', 'foreachPartition', 'fullOuterJoin', 'func', 'getCheckpointFile', 'getNumPartitions', 'getStorageLevel', 'glom', 'groupBy', 'groupByKey', 'groupWith', 'histogram', 'id', 'intersection', 'isCheckpointed', 'isEmpty', 'is_cached', 'is_checkpointed', 'join', 'keyBy', 'keys', 'leftOuterJoin', 'lookup', 'map', 'mapPartitions', 'mapPartitionsWithIndex', 'mapPartitionsWithSplit', 'mapValues', 'max', 'mean', 'meanApprox', 'min', 'name', 'partitionBy', 'partitioner', 'persist', 'pipe', 'preservesPartitioning', 'prev', 'randomSplit', 'reduce', 'reduceByKey', 'reduceByKeyLocally', 'repartition', 'repartitionAndSortWithinPartitions', 'rightOuterJoin', 'sample', 'sampleByKey', 'sampleStdev', 'sampleVariance', 'saveAsHadoopDataset', 'saveAsHadoopFile', 'saveAsNewAPIHadoopDataset', 'saveAsNewAPIHadoopFile', 'saveAsPickleFile', 'saveAsSequenceFile', 'saveAsTextFile', 'setName', 'sortBy', 'sortByKey', 'stats', 'stdev', 'subtract', 'subtractByKey', 'sum', 'sumApprox', 'take', 'takeOrdered', 'takeSample', 'toDebugString', 'toLocalIterator', 'top', 'treeAggregate', 'treeReduce', 'union', 'unpersist', 'values', 'variance', 'zip', 'zipWithIndex', 'zipWithUniqueId']
(Pdb) p rdd3.map(lambda s: s['device_visibility_by_minute'])
PythonRDD[318] at RDD at PythonRDD.scala:43
(Pdb) p rdd3.map(lambda s: s['device_visibility_by_minute']).collect()
[{u'9': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, u'1', u'1', u'1', u'1', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], u'4': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, u'1', u'1', u'1', u'1', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}, {u'1': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, u'1', u'1', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], u'8': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, u'1', u'1', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}]
(Pdb) 
===========================================

pretty print RDD

(pdb) import pprint
(Pdb) pprint.pprint(rdd1.collect())
[{u'_id': {u'__class__': u'org.bson.types.ObjectId',
           u'date': datetime.datetime(2015, 12, 26, 16, 48, 15),
           u'inc': 1149240855,
           u'machine': 2027732777,
           u'new': False,
           u'time': 1451177295000,
           u'timeSecond': 1451177295,
           u'timestamp': 1451177295},
  u'device_visibility': {u'4': {u'10': u'1',
                                u'11': u'1',
                                u'12': u'1',
                                u'13': u'1'},
                         u'9': {u'10': u'1',
                                u'11': u'1',
                                u'12': u'1',
                                u'13': u'1'}},
  u'home_id': u'homeid1',
  u'timestamp_hour': u'2015-12-26T09:13:00'},

===================================


github


git clone https://github.com/tejasvikothapalli/Energy_Conservation_Machine-Learning.git

echo "# Energy_Conservation_Machine-Learning" >> README.md
git init
#git add README.md
git status
#git add .
git add services/daily_dump.py services/cluster-devices-daily.py  junk_notes.xt services/cluster-devices.py  smart_home_app/static/test.html  smart_home_app/views.py 
git commit -m "first commit"
git remote add origin https://github.com/tejasvikothapalli/Energy_Conservation_Machine-Learning.git
git push -u origin master

to pull changes
-------------
git pull

to Push changes
-----------------
git add .
git commit -m "first commit"
git push



client
===========

To simulate data:
/home/bigdata/smart_home_app/client
python client_simulator.py


You can View API in Browser: http://54.201.150.12:8043/smart_home_app/? GOOD

curl  "http://54.201.150.12:8043/smart_home_app/"
{"ok":"true"}

bigdata@cosmos:~/smart_home_app/client$ curl -X POST -d @device_stats_post.json "http://localhost:8000/smart_home_app/?"
{"1":"switch off","2":"switch off","ok":"true"}


docker
=============

http://stackoverflow.com/questions/33391840/getting-spark-python-and-mongodb-to-work-together


nmap
============


# in ubuntu: sudo apt-get install nmap
#           sudo python -m easy_install python-nmap
#
# in mac: sudo easy_install python-nmap
# python client_home1.py 
# ['192.168.1.1', '192.168.1.104', '192.168.1.106', '192.168.1.107', '192.168.1.109', '192.168.1.118', '192.168.1.119', '192.168.1.145', '192.168.1.146']


import nmap
nm = nmap.PortScanner()

# hostlist = ' '.join(nm.all_hosts())
# nm.scan(hosts=hostlist, arguments='-n -sP -PE')
# print hostlist

hostlist = "192.168.1.1/24"
nm.scan(hosts=hostlist, arguments='-sP')
print nm.all_hosts()



===========



ubuntu@ip-172-31-41-212:~/Energy_Conservation_Machine-Learning/smart_home_app$ 
ubuntu@ip-172-31-41-212:~/Energy_Conservation_Machine-Learning/smart_home_app$ 
ubuntu@ip-172-31-41-212:~/Energy_Conservation_Machine-Learning/smart_home_app$ 
ubuntu@ip-172-31-41-212:~/Energy_Conservation_Machine-Learning/smart_home_app$ 
ubuntu@ip-172-31-41-212:~/Energy_Conservation_Machine-Learning/smart_home_app$ 
ubuntu@ip-172-31-41-212:~/Energy_Conservation_Machine-Learning/smart_home_app$ python
Python 2.7.6 (default, Jun 22 2015, 17:58:13) 
[GCC 4.8.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from pymongo import MongoClient
>>> dbconn = db.home_automation
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'db' is not defined
>>> db = MongoClient('localhost', 27017)
>>> dbconn = db.home_automation
>>> device_clusters_collection = dbconn['device_clusters']  # collection in DB
>>> "weekday_hour" : "weekday0-19hour"
  File "<stdin>", line 1
    "weekday_hour" : "weekday0-19hour"
                   ^
SyntaxError: invalid syntax
>>> device_custers_obj = device_clusters_collection.find_one({"weekday_hour" : "weekday0-19hour"})
>>> print (device_custers_obj)
{u'weekday_hour': u'weekday0-19hour', u'device_visibility_by_minute': {u'192_168_1_107': [0, 0, 0, 0, 0, 0, 0, u'1', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, u'1', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, u'1', 0, 0, 0, 0, u'1', u'1', u'1', u'1', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, u'1'], u'192_168_1_128': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', 0, u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', 0, u'1', u'1', u'1', u'1', u'1', u'1', u'1'], u'192_168_1_102': [0, u'1', u'1', u'1', u'1', u'1', u'1', u'1', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, u'1'], u'192_168_1_118': [0, u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', 0, u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', 0, u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', 0, u'1', u'1', u'1', u'1', u'1', u'1', u'1'], u'192_168_1_124': [0, 0, u'1', u'1', 0, u'1', u'1', 0, u'1', u'1', u'1', u'1', u'1', u'1', u'1', 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, u'1', 0, u'1'], u'192_168_1_137': [0, u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', 0, u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', 0, u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', 0, u'1', u'1', u'1', u'1', u'1', u'1', u'1'], u'192_168_1_1': [0, u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', 0, u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', 0, u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', u'1', 0, u'1', u'1', u'1', u'1', u'1', u'1', u'1'], u'192_168_1_145': [0, u'1', u'1', u'1', 0, u'1', u'1', 0, u'1', u'1', 0, u'1', u'1', u'1', 0, 0, u'1', 0, u'1', u'1', u'1', 0, u'1', u'1', u'1', u'1', 0, u'1', u'1', u'1', u'1', u'1', u'1', 0, u'1', 0, 0, 0, u'1', 0, u'1', u'1', u'1', u'1', u'1', u'1', 0, 0, u'1', 0, u'1', 0, u'1', 0, u'1', u'1', u'1', 0, u'1']}, u'home_id': u'teja', u'device_clusters': {u'192_168_1_107': 4, u'192_168_1_128': 3, u'192_168_1_102': 5, u'192_168_1_118': 0, u'192_168_1_137': 0, u'192_168_1_124': 1, u'192_168_1_1': 0, u'192_168_1_145': 2}, u'device_visibility': {u'192_168_1_107': {u'38': u'1', u'58': u'1', u'19': u'1', u'30': u'1', u'37': u'1', u'36': u'1', u'35': u'1', u'7': u'1'}, u'192_168_1_128': {u'56': u'1', u'28': u'1', u'29': u'1', u'49': u'1', u'34': u'1', u'24': u'1', u'25': u'1', u'26': u'1', u'27': u'1', u'48': u'1', u'23': u'1', u'46': u'1', u'47': u'1', u'44': u'1', u'45': u'1', u'42': u'1', u'43': u'1', u'40': u'1', u'41': u'1', u'35': u'1', u'39': u'1', u'38': u'1', u'59': u'1', u'58': u'1', u'55': u'1', u'32': u'1', u'31': u'1', u'30': u'1', u'37': u'1', u'36': u'1', u'53': u'1', u'52': u'1', u'54': u'1', u'57': u'1', u'50': u'1'}, u'192_168_1_102': {u'59': u'1', u'58': u'1', u'1': u'1', u'3': u'1', u'2': u'1', u'5': u'1', u'4': u'1', u'7': u'1', u'6': u'1'}, u'192_168_1_118': {u'58': u'1', u'56': u'1', u'54': u'1', u'28': u'1', u'29': u'1', u'35': u'1', u'34': u'1', u'24': u'1', u'25': u'1', u'26': u'1', u'27': u'1', u'20': u'1', u'21': u'1', u'22': u'1', u'49': u'1', u'46': u'1', u'47': u'1', u'44': u'1', u'45': u'1', u'42': u'1', u'43': u'1', u'40': u'1', u'41': u'1', u'1': u'1', u'3': u'1', u'2': u'1', u'5': u'1', u'4': u'1', u'7': u'1', u'6': u'1', u'9': u'1', u'8': u'1', u'13': u'1', u'12': u'1', u'30': u'1', u'14': u'1', u'11': u'1', u'10': u'1', u'39': u'1', u'38': u'1', u'59': u'1', u'48': u'1', u'17': u'1', u'16': u'1', u'19': u'1', u'18': u'1', u'31': u'1', u'23': u'1', u'37': u'1', u'36': u'1', u'53': u'1', u'52': u'1', u'55': u'1', u'32': u'1', u'57': u'1', u'50': u'1'}, u'192_168_1_137': {u'58': u'1', u'56': u'1', u'54': u'1', u'28': u'1', u'29': u'1', u'35': u'1', u'34': u'1', u'24': u'1', u'25': u'1', u'26': u'1', u'27': u'1', u'20': u'1', u'21': u'1', u'22': u'1', u'49': u'1', u'46': u'1', u'47': u'1', u'44': u'1', u'45': u'1', u'42': u'1', u'43': u'1', u'40': u'1', u'41': u'1', u'1': u'1', u'3': u'1', u'2': u'1', u'5': u'1', u'4': u'1', u'7': u'1', u'6': u'1', u'9': u'1', u'8': u'1', u'13': u'1', u'12': u'1', u'30': u'1', u'14': u'1', u'11': u'1', u'10': u'1', u'39': u'1', u'38': u'1', u'59': u'1', u'48': u'1', u'17': u'1', u'16': u'1', u'19': u'1', u'18': u'1', u'31': u'1', u'23': u'1', u'37': u'1', u'36': u'1', u'53': u'1', u'52': u'1', u'55': u'1', u'32': u'1', u'57': u'1', u'50': u'1'}, u'192_168_1_124': {u'11': u'1', u'10': u'1', u'13': u'1', u'12': u'1', u'59': u'1', u'14': u'1', u'56': u'1', u'3': u'1', u'2': u'1', u'5': u'1', u'6': u'1', u'9': u'1', u'8': u'1', u'58': u'1'}, u'192_168_1_1': {u'58': u'1', u'56': u'1', u'54': u'1', u'28': u'1', u'29': u'1', u'35': u'1', u'34': u'1', u'24': u'1', u'25': u'1', u'26': u'1', u'27': u'1', u'20': u'1', u'21': u'1', u'22': u'1', u'49': u'1', u'46': u'1', u'47': u'1', u'44': u'1', u'45': u'1', u'42': u'1', u'43': u'1', u'40': u'1', u'41': u'1', u'1': u'1', u'3': u'1', u'2': u'1', u'5': u'1', u'4': u'1', u'7': u'1', u'6': u'1', u'9': u'1', u'8': u'1', u'13': u'1', u'12': u'1', u'30': u'1', u'14': u'1', u'11': u'1', u'10': u'1', u'39': u'1', u'38': u'1', u'59': u'1', u'48': u'1', u'17': u'1', u'16': u'1', u'19': u'1', u'18': u'1', u'31': u'1', u'23': u'1', u'37': u'1', u'36': u'1', u'53': u'1', u'52': u'1', u'55': u'1', u'32': u'1', u'57': u'1', u'50': u'1'}, u'192_168_1_145': {u'30': u'1', u'42': u'1', u'43': u'1', u'34': u'1', u'24': u'1', u'25': u'1', u'27': u'1', u'20': u'1', u'22': u'1', u'23': u'1', u'44': u'1', u'45': u'1', u'28': u'1', u'29': u'1', u'40': u'1', u'41': u'1', u'1': u'1', u'3': u'1', u'2': u'1', u'5': u'1', u'6': u'1', u'9': u'1', u'8': u'1', u'12': u'1', u'32': u'1', u'58': u'1', u'11': u'1', u'13': u'1', u'38': u'1', u'59': u'1', u'48': u'1', u'16': u'1', u'19': u'1', u'54': u'1', u'31': u'1', u'56': u'1', u'50': u'1', u'52': u'1', u'55': u'1', u'18': u'1'}}, u'_id': {u'timeSecond': 1465869665, u'timestamp': 1465869665, u'__class__': u'org.bson.types.ObjectId', u'machine': -1155399176, u'time': 1465869665000L, u'date': datetime.datetime(2016, 6, 14, 2, 1, 5), u'new': False, u'inc': -1941971993}, u'timestamp_hour': u'2016-06-13T19:00:00'}
>>> print (device_custers_obj['device_clusters'])
{u'192_168_1_107': 4, u'192_168_1_128': 3, u'192_168_1_102': 5, u'192_168_1_118': 0, u'192_168_1_137': 0, u'192_168_1_124': 1, u'192_168_1_1': 0, u'192_168_1_145': 2}
>>> 


================



wemo server ouimeaux


  $ curl http://localhost:5000/api/environment
  {
    "WeMo Insight": {
        "currentpower": 44080,
        "host": "192.168.1.119",
        "lastchange": "2016-06-25 20:18:57",
        "model": "Belkin Insight 1.0",
        "name": "WeMo Insight",
        "onfor": 510,
        "ontoday": 1042,
        "ontotal": 1018,
        "serialnumber": "231613K12014D3",
        "state": 1, <-- on 
        "todaymw": 0.012668583586705,
        "totalmw": 760115,
        "type": "Insight"
    }
  }
    $ wemo -v switch "WeMo Insight" off
   $ curl http://localhost:5000/api/environment
  {
    "WeMo Insight": {
        "currentpower": 0,
        "host": "192.168.1.119",
        "lastchange": "2016-06-25 20:29:14",
        "model": "Belkin Insight 1.0",
        "name": "WeMo Insight",
        "onfor": 617,
        "ontoday": 1149,
        "ontotal": 1122,
        "serialnumber": "231613K12014D3",
        "state": 0, <-- off
        "todaymw": 0.014138716949440999,
        "totalmw": 848323,
        "type": "Insight"
    }
}

tejasvi@tejasvi:~$ curl http://192.168.1.137:5000/api/device/WeMo%20Insight
{
    "currentpower": 43940,
    "host": "192.168.1.119",
    "lastchange": "2016-06-25 20:29:29",
    "model": "Belkin Insight 1.0",
    "name": "WeMo Insight",
    "onfor": 1539,
    "ontoday": 2688,
    "ontotal": 2625,
    "serialnumber": "231613K12014D3",
    "state": 1,
    "todaymw": 0.032311083979555,
    "totalmw": 1938665,
    "type": "Insight"
}




bash-3.2$ curl -X POST http://192.168.1.137:5000/api/device/Wemo%20Insight -d '{"state":"off"}'
{
    "currentpower": 0,
    "host": "192.168.1.119",
    "lastchange": "2016-06-25 20:29:29",
    "model": "Belkin Insight 1.0",
    "name": "WeMo Insight",
    "onfor": 1913,
    "ontoday": 3062,
    "ontotal": 2990,
    "serialnumber": "231613K12014D3",
    "state": 0,
    "todaymw": 0.036698600733972,
    "totalmw": 2201916,
    "type": "Insight"
}
bash-3.2$ curl -X POST http://192.168.1.137:5000/api/device/Wemo%20Insight -d '{"state":"on"}'
{
    "currentpower": 0,
    "host": "192.168.1.119",
    "lastchange": "2016-06-25 21:01:23",
    "model": "Belkin Insight 1.0",
    "name": "WeMo Insight",
    "onfor": 1913,
    "ontoday": 3062,
    "ontotal": 2990,
    "serialnumber": "231613K12014D3",
    "state": 1,
    "todaymw": 0.036698600733972,
    "totalmw": 2201916,
    "type": "Insight"
}




========================

MAC address instead of IP:-
http://stackoverflow.com/questions/26198714/how-to-retrieve-mac-addresses-from-nearby-hosts-in-python

# Vendor list for MAC address
nm.scan('192.168.0.0/24', arguments='-O')
for h in nm.all_hosts():
    if 'mac' in nm[h]['addresses']:
        print(nm[h]['addresses'], nm[h]['vendor'])


The mac field is only populated when the overall program has been run as root.


============



#
# Perform action based on past analysis
# min_of_day
current_min_from_start_of_day=date_obj.hour*60 + date_obj.minute

if current_min_from_start_of_day%120 ==0: # update past results every 2hrs
    # call this periodically
    read_device_analysis()

if current_min_from_start_of_day in action_minute_device_dependant_device_map:
    device_dependant_device_map = action_minute_device_dependant_device_map[current_min_from_start_of_day]
    # tejmacairB8:E8:56:43:49:08
    # Check the current device 
    # At this minute in the past, see the the visibility of the device. Based on it turn off/on wemo.
    for past_device in device_dependant_device_map:
        is_past_device_visible_now=0
        past_dependency_device = device_dependant_device_map[past_device]
        for curr_visible_device in json_obj['device_visibility'].keys():
            if past_device.find(curr_visible_device) != -1:
                is_past_device_visible_now=1

        if is_past_device_visible_now == 0:
            response_string[past_dependency_device] = "switch off"
        else:
            response_string[past_dependency_device] = "switch on"
                



~/smart_home_app/test$ curl -X POST -d @device_stats_post.json "http://localhost:8043/smart_home_app/?"

~/smart_home_app/test$ cat device_stats_post.json

in /tmp/device...
SIMILARACTION 1179 tejmacairB8:E8:56:43:49:08 tejlightWeMo%20Insight
SIMILARACTION 1180 tejmacairB8:E8:56:43:49:08 tejlightWeMo%20Insight

# test action: tejmacairB8:E8:56:43:49:08 is off
{"home_id": "teja", "device_visibility": {"14:91:82:C9:61:91": {"14": "1"}, "C0:56:27:B4:A5:79": {"14": "1"}, "6C:AD:F8:2B:AA:8D": {"14": "1"}, "C0:C1:C0:B2:BE:C4": {"14": "1"}, "64:BC:0C:67:97:BC": {"14": "1"}, "192_168_1_137": {"14": "1"}, "94:94:26:95:12:0B": {"14": "1"}, "AC:BC:32:B4:01:27": {"14": "1"}, "00:BB:3A:11:E7:D5": {"14": "1"}, "00:6B:9E:4A:42:83": {"14": "1"}, "WeMo%20Insight": {"14": "1"}}, "timestamp_hour": "2017-12-30T19:39:00"}


#Prime cache just for test
{"home_id": "teja", "device_visibility": {"14:91:82:C9:61:91": {"14": "1"}, "C0:56:27:B4:A5:79": {"14": "1"}, "6C:AD:F8:2B:AA:8D": {"14": "1"}, "C0:C1:C0:B2:BE:C4": {"14": "1"}, "64:BC:0C:67:97:BC": {"14": "1"}, "192_168_1_137": {"14": "1"}, "94:94:26:95:12:0B": {"14": "1"}, "AC:BC:32:B4:01:27": {"14": "1"}, "00:BB:3A:11:E7:D5": {"14": "1"}, "00:6B:9E:4A:42:83": {"14": "1"}, "WeMo%20Insight": {"14": "1"}}, "timestamp_hour": "2017-12-30T16:00:00"}




========================

python plot graphs
http://matplotlib.org/gallery.html

http://matplotlib.org/examples/lines_bars_and_markers/marker_fillstyle_reference.html

sudo apt-get install python-matplotlib

http://matplotlib.org/2.0.0b2/examples/lines_bars_and_markers/line_demo_dash_control.html

http://stackoverflow.com/questions/21519203/plotting-a-list-of-x-y-coordinates-in-python-matplotlib



import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
#plt.plot([1,2,3])
x=[10]
y=[1]
plt.scatter(x, y)

x=[100]
y=[1]
plt.scatter(x, y)

x=[1600]
y=[5]
plt.scatter(x, y)

plt.axis([0, 1600, 0, 20]) # xmin, xmax, ymin, ymax

y=[1,5,6]
ylabels=["a", "b", "c"]
plt.yticks(y, ylabels)
plt.xlabel("Time (minute of the day) ")
plt.savefig('myfig')



===============================

tunnel


in client:
ssh -o TCPKeepAlive=yes -o ServerAliveInterval=50 -R 44444:localhost:22 -i "tejasvideca.pem.txt" ubuntu@xxxxx  -l ubuntu

login to server 
ssh -l tejasvi -p 44444 localhost
========================================